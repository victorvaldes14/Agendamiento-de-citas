{% extends 'master.html' %}
{% block title %}Mi Panel{% endblock %}

{% block content %}
<h1 style="color:white; margin-bottom:20px;">Mis Citas</h1>

{% if citas %}
    {% for c in citas %}
        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>{{ c.servicio.nombre }}</h3>
                <span class="estado {{ c.estado }}">{{ c.estado|title }}</span>
            </div>

            <p><strong>Fecha:</strong> {{ c.fecha|date:"d/m/Y" }}</p>
            <p><strong>Hora:</strong> {{ c.hora|time:"H:i" }}</p>
            <p><strong>Estado:</strong> {{ c.estado|title }}</p>

            <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
                {% if c.estado == 'pendiente' %}
                    <a href="{% url 'cancelar_cita' c.id %}" class="btn danger">Cancelar</a>
                    <a href="{% url 'reagendar_cita' c.id %}" class="btn info">Reagendar</a>
                {% else %}
                    <a href="{% url 'detalle_cita' c.id %}" class="btn neutral">Ver Detalle</a>
                {% endif %}
            </div>
        </div>
    {% endfor %}
{% else %}
    <p style="color:#ddd;">AÃºn no tienes citas agendadas.</p>
{% endif %}
{% endblock %}
