{% extends 'master.html' %}
{% block title %}Mi Panel{% endblock %}
{% block content %}
<h1>Mis Citas</h1>
{% for c in citas %}
  <div style="border:1px solid #ccc; padding:10px; margin:10px 0;">
    <strong>{{ c.servicio.nombre }}</strong> - {{ c.fecha }} {{ c.hora }}<br>
    Estado: {{ c.get_estado_display }}

    <div style="margin-top:8px;">
      {% if c.puede_cancelar and c.estado != 'cancelada' %}
        <a href="{% url 'cancelar_cita' c.id %}" class="btn-submit" style="background:#dc3545;">Cancelar</a>
      {% endif %}

      {% if user.is_authenticated %}
        <a href="{% url 'reagendar_cita' c.id %}" class="btn-submit" style="background:#007bff;">Reagendar</a>
      {% endif %}
    </div>
  </div>
{% empty %}
  <p>No tienes citas registradas.</p>
{% endfor %}
{%endblock%}
